import{_ as t,o as a,c as d,e as o}from"./index-86c22afc.js";const n="/assets/h2o_tileset-2e0acaea.png",u="data:image/png;base64,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";const s={},i={class:"doc-article"};function r(l,e){return a(),d("div",i,[...e[0]||(e[0]=[o('<h1 id="documentation-de-r√©f√©rence-de-squarity-v1" data-v-f0b540d7>Documentation de r√©f√©rence de Squarity V1 <a class="header-anchor" href="#documentation-de-r√©f√©rence-de-squarity-v1" data-v-f0b540d7>üîó</a></h1><p data-v-f0b540d7><a href="http://squarity.fr" data-v-f0b540d7>Squarity</a> est un espace de cr√©ation et de partage de jeux vid√©o jouables en ligne.</p><p data-v-f0b540d7>Ce manuel suppose que vous ayez d√©j√† un minimum de connaissance en informatique (langage python, format JSON, ...). Pour les personnes qui d√©butent, vous pouvez lire <a href="https://github.com/darkrecher/squarity-doc/blob/master/user_manual/tutoriel_sokoban.md" data-v-f0b540d7>le tutoriel soko-ban</a>, plus long mais plus d√©taill√©.</p><p data-v-f0b540d7>Les jeux sont en 2D &quot;case par case&quot;, (comme les dames, le d√©mineur, ...). L&#39;aire de jeu est une grille compos√©e de carr√©s, sur lesquels sont plac√©s des √©l√©ments.</p><p data-v-f0b540d7>La &quot;game logic&quot; (le fonctionnement et les r√®gles du jeu) est d√©finie par du code en python.</p><p data-v-f0b540d7>Un jeu est d√©fini par trois composants :</p><ul data-v-f0b540d7><li data-v-f0b540d7>tileset,</li><li data-v-f0b540d7>configuration,</li><li data-v-f0b540d7>&quot;game_code&quot;.</li></ul><h2 id="le-tileset" data-v-f0b540d7>Le tileset <a class="header-anchor" href="#le-tileset" data-v-f0b540d7>üîó</a></h2><p data-v-f0b540d7>Il s&#39;agit d&#39;une image au format jpg, png ou autre, contenant les √©l√©ments de votre jeu (d√©cors, personnages, objets). Voici quelques exemples :</p><p data-v-f0b540d7><img src="'+n+'" alt="Le tileset original (et moche) de H2O" data-v-f0b540d7></p><p data-v-f0b540d7><img src="'+u+`" alt="Le tileset utilis√© dans les mini exemples de tutoriels" data-v-f0b540d7></p><p data-v-f0b540d7>Chaque √©l√©ment de jeu est contenu dans un carr√©, qui ont tous la m√™me taille en pixels.</p><p data-v-f0b540d7>Les pixels transparents, dans le format png, sont pris en compte.</p><p data-v-f0b540d7>Pour que votre tileset soit accessible dans Squarity, il doit √™tre publi√© sur internet. Utilisez des sites d&#39;h√©bergement d&#39;images comme imgur ou imgbb. R√©cup√©rez le lien direct de votre fichier et indiquez-le dans le champ &quot;Url de l&#39;image&quot;.</p><p data-v-f0b540d7>Si l&#39;image n&#39;est pas trop grande, vous pouvez √©galement la convertir en url-data, avec un service en ligne comme <a href="https://ezgif.com/image-to-datauri" data-v-f0b540d7>ezgif</a>.</p><h2 id="la-configuration" data-v-f0b540d7>La configuration <a class="header-anchor" href="#la-configuration" data-v-f0b540d7>üîó</a></h2><p data-v-f0b540d7>Il s&#39;agit d&#39;un texte, au format JSON. Voici un exemple :</p><pre data-v-f0b540d7><code data-v-f0b540d7>{
    &quot;version&quot;: &quot;1.0.0&quot;,
    &quot;tile_size&quot;: 32,
    &quot;img_coords&quot;: {
        &quot;X&quot;: [0, 0],
        &quot;.&quot;: [32, 0],
        &quot;H&quot;: [64, 0],
        &quot;C&quot;: [96, 0],
        &quot;water_right&quot;: [0, 32],
        &quot;water_down&quot;: [32, 32],
        &quot;water_left&quot;: [64, 32],
        &quot;water_up&quot;: [96, 32],
        &quot;O&quot;: [0, 256],
        &quot;wet_grid&quot;: [32, 256],
        &quot;S&quot;: [64, 256]
    }
}
</code></pre><p data-v-f0b540d7>Cette configuration est un dictionnaire (une &quot;correspondance&quot;), contenant deux √©l√©ments :</p><ul data-v-f0b540d7><li data-v-f0b540d7>le premier a pour cl√© <code data-v-f0b540d7>tile_size</code> et pour valeur un nombre. Il d√©finit la taille, en pixels, de chacun des √©l√©ments du jeu, tel que vous les avez dessin√©s dans votre tileset.</li><li data-v-f0b540d7>le suivant a pour cl√© <code data-v-f0b540d7>img_coords</code> et pour valeur un sous-dictionnaire : <ul data-v-f0b540d7><li data-v-f0b540d7>chacun de ses sous-√©l√©ments a pour cl√© un texte (de un ou plusieurs caract√®res), d√©finissant un nom d&#39;objet dans votre jeu. La valeur correspondante est une liste de deux nombres, indiquant les coordonn√©es du coin sup√©rieur gauche, dans votre tileset, de l&#39;image de cet objet du jeu.</li></ul></li></ul><p data-v-f0b540d7>Par d√©faut, l&#39;aire de jeu a une largeur de 20 cases et une hauteur de 14 cases. Vous pouvez changer cette taille en ajoutant un √©l√©ment dans la configuration :</p><pre data-v-f0b540d7><code data-v-f0b540d7>    &quot;game_area&quot;: {
        &quot;nb_tile_width&quot;: 22,
        &quot;nb_tile_height&quot;: 15
    }
</code></pre><h2 id="le-game_code" data-v-f0b540d7>Le game_code <a class="header-anchor" href="#le-game_code" data-v-f0b540d7>üîó</a></h2><p data-v-f0b540d7>Il s&#39;agit d&#39;un texte √©crit en langage python.</p><p data-v-f0b540d7>Ce code doit d√©crire le contenu de l&#39;aire de jeu (quels objets se trouvent sur quelle case) et ce qui se passe lorsque la personne qui joue appuie sur une touche de direction ou d&#39;action.</p><p data-v-f0b540d7>Voici la structure minimale du code :</p><pre data-v-f0b540d7><code data-v-f0b540d7>class GameModel():

    def __init__(self):
        self.w = 20 # width (largeur) : 20 cases
        self.h = 14 # height (hauteur) : 14 cases
        self.tiles = [
            [
                [] for x in range(self.w)
            ]
            for y in range(self.h)
        ]

    def export_all_tiles(self):
        return self.tiles

    def on_game_event(self, event_name):
        pass
</code></pre><p data-v-f0b540d7>Ce code d√©finit une classe <code data-v-f0b540d7>GameModel</code>, contenant la fonction <code data-v-f0b540d7>__init__</code> et deux callbacks, c&#39;est √† dire des fonctions appel√©es automatiquement par le syst√®me de jeu.</p><p data-v-f0b540d7>Vous pouvez bien entendu ajouter d&#39;autres classes, d&#39;autres fonctions, d&#39;autres variables membres dans <code data-v-f0b540d7>GameModel</code>, etc.</p><h3 id="fonction-gamemodel__init__self" data-v-f0b540d7>Fonction GameModel.__init__(self) <a class="header-anchor" href="#fonction-gamemodel__init__self" data-v-f0b540d7>üîó</a></h3><p data-v-f0b540d7>Cette fonction est ex√©cut√©e une seule fois, au d√©but du jeu.</p><p data-v-f0b540d7>Ce n&#39;est pas oblig√© d&#39;initialiser une variable membre <code data-v-f0b540d7>self.tiles</code>, mais c&#39;est une bonne pratique.</p><p data-v-f0b540d7>Cette variable membre est constitu√©e d&#39;un tableau de 20*14 cases, chacune contenant une liste vide. Si vous avez d√©fini une autre taille dans la configuration, vous devez changer les variables <code data-v-f0b540d7>self.w</code> et <code data-v-f0b540d7>self.h</code>.</p><p data-v-f0b540d7>Vous pouvez ensuite remplir ce tableau, en ajoutant une ou plusieurs strings dans les listes vides. Ces strings correspondent aux noms des objets d√©finis dans la partie <code data-v-f0b540d7>img_coords</code> de la configuration.</p><h3 id="fonction-gamemodelexport_all_tilesself" data-v-f0b540d7>Fonction GameModel.export_all_tiles(self) <a class="header-anchor" href="#fonction-gamemodelexport_all_tilesself" data-v-f0b540d7>üîó</a></h3><p data-v-f0b540d7>Cette fonction est appel√©e √† chaque rendu (dessin √† l&#39;√©cran) de l&#39;aire de jeu.</p><p data-v-f0b540d7>Il faut renvoyer un tableau 2D dont chaque case contient une liste de strings. Il faut donc renvoyer &quot;une liste de liste de liste de strings&quot;.</p><p data-v-f0b540d7>L&#39;ordre des noms dans chacune des listes d√©finit l&#39;ordre de dessin des objets sur la case.</p><p data-v-f0b540d7>Cette fonction peut effectuer des traitements sp√©cifiques, par exemple construire le nom d&#39;un objet complexe et le placer dans une des cases. Le comportement le plus commun est de renvoyer directement <code data-v-f0b540d7>self.tiles</code>.</p><p data-v-f0b540d7>Cette fonction pourra, dans le futur, renvoyer d&#39;autres informations sur la situation du jeu.</p><h3 id="fonction-gamemodelon_game_eventself-event_name" data-v-f0b540d7>Fonction GameModel.on_game_event(self, event_name) <a class="header-anchor" href="#fonction-gamemodelon_game_eventself-event_name" data-v-f0b540d7>üîó</a></h3><p data-v-f0b540d7>Cette fonction est appel√©e √† chaque √©v√©nement du jeu : une action de la personne qui joue, ou bien une action diff√©r√©e qui a √©t√© pr√©alablement enregistr√©e.</p><p data-v-f0b540d7>Le param√®tre <code data-v-f0b540d7>event_name</code> indique le type d&#39;action. Il peut prendre les valeurs suivantes :</p><ul data-v-f0b540d7><li data-v-f0b540d7>&quot;U&quot; (up) : le bouton &quot;haut&quot; a √©t√© appuy√©</li><li data-v-f0b540d7>&quot;D&quot; (down) : bouton &quot;bas&quot;</li><li data-v-f0b540d7>&quot;L&quot; (left) : bouton &quot;gauche&quot;</li><li data-v-f0b540d7>&quot;R&quot; (right) : bouton &quot;droit&quot;</li><li data-v-f0b540d7>&quot;action_1&quot; : bouton &quot;1&quot;</li><li data-v-f0b540d7>&quot;action_2&quot; : bouton &quot;2&quot;</li></ul><p data-v-f0b540d7>Ces √©v√©nements sont √©galement d√©clench√©s par des appuis de touches sur le clavier (fl√®ches de direction, touches &quot;1&quot; et &quot;2&quot;). Pour cela, le focus doit √™tre sur l&#39;aire de jeu ou sur les boutons (il faut avoir cliqu√© dessus).</p><p data-v-f0b540d7>Le param√®tre <code data-v-f0b540d7>event_name</code> peut prendre d&#39;autres valeurs, dans le cas des actions diff√©r√©es. Cette fonctionnalit√© n&#39;est pas document√©e pour l&#39;instant.</p><p data-v-f0b540d7>La fonction <code data-v-f0b540d7>on_game_event</code> a pour charge de modifier la situation du jeu, c&#39;est √† dire le contenu de <code data-v-f0b540d7>self.tiles</code>, en fonction de l&#39;√©v√©nement. Elle impl√©mente la plus grande partie de la &quot;game logic&quot;.</p><p data-v-f0b540d7>Un rendu complet de l&#39;aire de jeu est d√©clench√© apr√®s chaque appel de cette fonction. Sauf si on indique explicitement qu&#39;on ne le veut pas (fonctionnement non document√© pour l&#39;instant).</p><h2 id="donn√©es-renvoy√©es-par-on_game_event" data-v-f0b540d7>Donn√©es renvoy√©es par on_game_event <a class="header-anchor" href="#donn√©es-renvoy√©es-par-on_game_event" data-v-f0b540d7>üîó</a></h2><p data-v-f0b540d7>La fonction <code data-v-f0b540d7>on_game_event</code> peut renvoyer une cha√Æne de caract√®re JSON, contenant diff√©rentes indications que le moteur de Squarity interpr√©tera. Ce n&#39;est pas obligatoire, la fonction peut ne contenir aucune instruction <code data-v-f0b540d7>return</code>, dans ce cas elle renverra <code data-v-f0b540d7>None</code> et le moteur ne fera rien de plus.</p><p data-v-f0b540d7>Vous trouverez des exemples de ces JSON dans <a href="https://squarity.pythonanywhere.com/game/#fetchez_example_magician" data-v-f0b540d7>le jeu du sorcier</a>.</p><h3 id="action-diff√©r√©e" data-v-f0b540d7>Action diff√©r√©e <a class="header-anchor" href="#action-diff√©r√©e" data-v-f0b540d7>üîó</a></h3><p data-v-f0b540d7>Ce JSON peut contenir une cl√© <code data-v-f0b540d7>delayed_actions</code>. La valeur doit √™tre une liste de sous-dictionnaire, avec une cl√© <code data-v-f0b540d7>name</code> et une cl√© <code data-v-f0b540d7>delay_ms</code>.</p><p data-v-f0b540d7>Exemple de ligne de code renvoyant un JSON avec une action diff√©r√©e:</p><p data-v-f0b540d7><code data-v-f0b540d7>return &quot;&quot;&quot; { &quot;delayed_actions&quot;: [ {&quot;name&quot;: &quot;my_action&quot;, &quot;delay_ms&quot;: 500} ] } &quot;&quot;&quot;</code></p><p data-v-f0b540d7>Avec ce JSON, le moteur ex√©cutera √† nouveau la fonction <code data-v-f0b540d7>GameModel.on_game_event</code>, 500 millisecondes plus tard. Le param√®tre <code data-v-f0b540d7>event_name</code> aura la valeur <code data-v-f0b540d7>&quot;my_action&quot;</code>.</p><p data-v-f0b540d7>Lors de cet ex√©cution diff√©r√©e de <code data-v-f0b540d7>on_game_event</code>, il est tout √† fait possible de renvoyer un autre JSON avec une (ou plusieurs) autres actions diff√©r√©es, et ainsi de suite.</p><h3 id="blocaged√©blocage-de-linterface" data-v-f0b540d7>Blocage/d√©blocage de l&#39;interface <a class="header-anchor" href="#blocaged√©blocage-de-linterface" data-v-f0b540d7>üîó</a></h3><p data-v-f0b540d7>Le JSON peut contenir une cl√© <code data-v-f0b540d7>player_locks</code> et/ou une cl√© <code data-v-f0b540d7>player_unlocks</code>. Les valeurs doivent √™tre des listes de cha√Ænes de caract√®res.</p><p data-v-f0b540d7>Chaque cha√Æne correspond √† une &quot;raison&quot; de bloquer l&#39;interface de la personne qui joue.</p><p data-v-f0b540d7>L&#39;interface est enti√®rement bloqu√©e tant qu&#39;il y a au moins une raison en cours : les boutons de directions et d&#39;actions apparaissent en gris√©, les touches de clavier et les clics de souris n&#39;ont aucun effet dans le jeu.</p><p data-v-f0b540d7>Lorsque vous bloquez l&#39;interface, il est fortement conseill√© de pr√©voir en m√™me temps un encha√Ænement d&#39;action diff√©r√©e, qui finira par d√©bloquer l&#39;interface.</p><p data-v-f0b540d7>Ces blocages d&#39;interface peuvent √™tre utile pour montrer des animations pr√©d√©finies, √† regarder sans jouer.</p><p data-v-f0b540d7>Petit exemple :</p><ul data-v-f0b540d7><li data-v-f0b540d7>Vous renvoyez le JSON <code data-v-f0b540d7>&quot;&quot;&quot; { &quot;delayed_actions&quot;: [ {&quot;name&quot;: &quot;play_anim&quot;, &quot;delay_ms&quot;: 500} ], &quot;player_locks&quot;: [&quot;anim&quot;] } &quot;&quot;&quot;</code>, pour bloquer l&#39;interface tout en planifiant l&#39;action diff√©r√©e <code data-v-f0b540d7>&quot;play_anim&quot;</code>.</li><li data-v-f0b540d7>Cette action diff√©r√©e d√©clenchera √©ventuellement d&#39;autres actions diff√©r√©es.</li><li data-v-f0b540d7>Au bout d&#39;un moment, l&#39;une de ces actions renvoie le JSON <code data-v-f0b540d7>&quot;&quot;&quot; { &quot;player_unlocks&quot;: [&quot;anim&quot;] } &quot;&quot;&quot;</code> pour d√©bloquer l&#39;interface.</li></ul><p data-v-f0b540d7>Si vous avez bloqu√© l&#39;interface avec plusieurs raisons diff√©rentes et que vous ne savez plus trop lesquelles, vous pouvez renvoyer le d√©blocague <code data-v-f0b540d7>*</code> pour supprimer en une fois toutes les raisons en cours. Exemple : <code data-v-f0b540d7>&quot;&quot;&quot; { &quot;player_unlocks&quot;: [&quot;*&quot;] } &quot;&quot;&quot;</code></p><h3 id="annulation-du-rendu" data-v-f0b540d7>Annulation du rendu <a class="header-anchor" href="#annulation-du-rendu" data-v-f0b540d7>üîó</a></h3><p data-v-f0b540d7>Si la fonction <code data-v-f0b540d7>on_game_event</code> ne change pas la disposition des game objects, vous pouvez indiquer au moteur de Squarity que ce n&#39;est pas la peine de redessiner l&#39;aire de jeu. √áa permet d&#39;optimiser l&#39;ex√©cution de votre jeu.</p><p data-v-f0b540d7>Le JSON peut contenir une cl√© <code data-v-f0b540d7>redraw</code>, qui vaut 1 par d√©faut. Si vous la d√©finissez √† 0, le rendu n&#39;est pas effectu√© pour cette fois.</p><p data-v-f0b540d7>Exemple : <code data-v-f0b540d7>&quot;&quot;&quot;{ &quot;redraw&quot;: 0 }&quot;&quot;&quot;</code></p><p data-v-f0b540d7>Il est bien entendu possible d&#39;avoir plusieurs cl√©s en m√™me temps, et plusieurs √©l√©ments dans les listes, le tout dans un m√™me JSON. Vous pourriez, en une seule fois, planifier 10 actions diff√©r√©es, bloquer l&#39;interface pour 15 raisons diff√©rentes, la d√©bloquer pour 20 autres raisons, le tout en annulant le rendu.</p><h2 id="d√©marrer-le-jeu" data-v-f0b540d7>D√©marrer le jeu <a class="header-anchor" href="#d√©marrer-le-jeu" data-v-f0b540d7>üîó</a></h2><p data-v-f0b540d7>Cliquez sur le bouton &quot;Ex√©cuter&quot; au milieu de la page. Le jeu est enti√®rement r√©initialis√©, la classe <code data-v-f0b540d7>GameModel</code> est reconstruite √† partir du nouveau game_code.</p><p data-v-f0b540d7>Si l&#39;url du tileset a chang√©e, l&#39;image est recharg√©e. Si vous avez modifi√© votre tileset mais que l&#39;url est rest√©e la m√™me, vous devez changer l&#39;url, ex√©cuter le jeu, puis remettre l&#39;ancienne url. Ce petit d√©sagr√©ment sera corrig√© d√®s que possible.</p><p data-v-f0b540d7>Pour l&#39;instant, il n&#39;est pas possible de sauvegarder la partie en cours. Le jeu recommence au d√©but √† chaque ex√©cution et √† chaque rechargement de la page.</p><h2 id="quelques-d√©tails-techniques" data-v-f0b540d7>Quelques d√©tails techniques <a class="header-anchor" href="#quelques-d√©tails-techniques" data-v-f0b540d7>üîó</a></h2><p data-v-f0b540d7>Le game_code doit √™tre cod√© en python version 3.7.4, il est ex√©cut√© par votre navigateur web, gr√¢ce √† <a href="https://github.com/iodide-project/pyodide" data-v-f0b540d7>Pyodide</a>. √áa fonctionne plus ou moins bien sur les smartphones, selon leur type et beaucoup d&#39;autres choses.</p><p data-v-f0b540d7>Lorsque votre code python comporte des erreurs, celles-ci apparaissent dans la zone de texte en bas de la page.</p><p data-v-f0b540d7>Lorsque vous appelez la fonction <code data-v-f0b540d7>print(&quot;message&quot;)</code>, le texte s&#39;affiche √©galement dans cette zone de texte. Vous pouvez utiliser cette fonctionnalit√© pour debugger et pour le jeu lui-m√™me.</p><p data-v-f0b540d7>√âvitez de d√©clencher des prints trop fr√©quents, car cela ralentit l&#39;ex√©cution. Chaque print modifie le DOM (la structure interne de la page web) et prend donc un peu de temps.</p><p data-v-f0b540d7>Une bonne pratique serait d&#39;avoir une fonction <code data-v-f0b540d7>debug(message)</code>, ex√©cutant un print uniquement si un bool√©en global <code data-v-f0b540d7>debug_mode</code> est mis √† True. Avant la distribution de votre jeu, mettez ce bool√©en √† False.</p>`,81)])])}const f=t(s,[["render",r],["__scopeId","data-v-f0b540d7"]]);export{f as default};
